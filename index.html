<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
      <title>YouTube Token Generator</title>
        <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@400;600&display=swap" rel="stylesheet">
          <link href="https://alljrlwr.great-site.net/AllJrLwr/style.css" rel="stylesheet">
          </head>
          <body>
            <div id="player-container">
                <div id="player"></div>
                    <div id="token-display">
                          Token: <span id="token"></span>
                              </div>
                                  <div id="validity-text">
                                        Token Only Valid for 30 Minutes
                                            </div>
                                                <div id="message-display" class="message">
                                                      Keep Watching! The Token Will Appear Soon.
                                                          </div>
                                                              <button class="button" onclick="refreshPage()">Refresh</button>
                                                                </div>

                                                                  <!-- Iklan/Ads Section -->
                                                                    <div id="ads-container" style="margin-top: 30px;">
                                                                        <script type='text/javascript' src='//pl25188925.profitablecpmrate.com/91/dc/32/91dc328b3fda8f12b463c5c0f9fafd8b.js'></script>
                                                                          </div>
                                                                            
                                                                              <script src="https://www.youtube.com/iframe_api"></script>
                                                                                <script>
                                                                                    let player;
                                                                                        let randomMinute = Math.floor(Math.random() * (4 - 2 + 1)) + 2; // Random minute between 2 and 4
                                                                                            let tokenDisplayed = false;
                                                                                                let lastCheckedTime = 0;

                                                                                                    // Array of video IDs
                                                                                                        const videoIds = [
                                                                                                              "y3rQW0f8AiQ",  // Replace with your YouTube video ID
                                                                                                                    "mdp2fjav9R8",  // Another example video ID
                                                                                                                          "pTRpUMyK3W0",  // Another example video ID
                                                                                                                                "Uw-ep9dYf6k",  // Another example video ID
                                                                                                                                      "neJnXVkarPI"   // Another example video ID
                                                                                                                                          ];

                                                                                                                                              // Select a random video ID from the array
                                                                                                                                                  const selectedVideoId = videoIds[Math.floor(Math.random() * videoIds.length)];

                                                                                                                                                      // Generate random string token
                                                                                                                                                          function generateToken(length = 30) {
                                                                                                                                                                const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
                                                                                                                                                                      let result = "";
                                                                                                                                                                            for (let i = 0; i < length; i++) {
                                                                                                                                                                                    result += chars.charAt(Math.floor(Math.random() * chars.length));
                                                                                                                                                                                          }
                                                                                                                                                                                                return result;
                                                                                                                                                                                                    }

                                                                                                                                                                                                        // Send token to backend (save_token.php)
                                                                                                                                                                                                            function sendTokenToBackend(token) {
                                                                                                                                                                                                                  fetch("https://alljrlwr.great-site.net/save_token.php", { // Change with your InfinityFree URL
                                                                                                                                                                                                                          method: "POST",
                                                                                                                                                                                                                                  headers: {
                                                                                                                                                                                                                                            "Content-Type": "application/json",
                                                                                                                                                                                                                                                    },
                                                                                                                                                                                                                                                            body: JSON.stringify({
                                                                                                                                                                                                                                                                      token: token,  // Kirimkan hanya token
                                                                                                                                                                                                                                                                                timestamp: new Date().toISOString()  // Kirimkan hanya timestamp
                                                                                                                                                                                                                                                                                        }),
                                                                                                                                                                                                                                                                                              })
                                                                                                                                                                                                                                                                                                    .then(response => response.json())
                                                                                                                                                                                                                                                                                                          .then(data => {
                                                                                                                                                                                                                                                                                                                  if (data.success) {
                                                                                                                                                                                                                                                                                                                            console.log("Token successfully sent.");
                                                                                                                                                                                                                                                                                                                                    } else {
                                                                                                                                                                                                                                                                                                                                              alert("Gagal mengirim token ke backend.");
                                                                                                                                                                                                                                                                                                                                                        setTimeout(refreshPage, 2000); // Automatically refresh after 2 seconds
                                                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                                                      })
                                                                                                                                                                                                                                                                                                                                                                            .catch((error) => {
                                                                                                                                                                                                                                                                                                                                                                                    console.error("Gagal mengirim token ke backend:", error);
                                                                                                                                                                                                                                                                                                                                                                                            alert("Terjadi kesalahan saat mengirim token.");
                                                                                                                                                                                                                                                                                                                                                                                                    setTimeout(refreshPage, 2000); // Automatically refresh after 2 seconds
                                                                                                                                                                                                                                                                                                                                                                                                          });
                                                                                                                                                                                                                                                                                                                                                                                                              }

                                                                                                                                                                                                                                                                                                                                                                                                                  // YouTube API callback to load video
                                                                                                                                                                                                                                                                                                                                                                                                                      function onYouTubeIframeAPIReady() {
                                                                                                                                                                                                                                                                                                                                                                                                                            player = new YT.Player('player', {
                                                                                                                                                                                                                                                                                                                                                                                                                                    height: '100%',
                                                                                                                                                                                                                                                                                                                                                                                                                                            width: '100%',
                                                                                                                                                                                                                                                                                                                                                                                                                                                    videoId: selectedVideoId, // Use the selected video ID
                                                                                                                                                                                                                                                                                                                                                                                                                                                            playerVars: {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                      modestbranding: 1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                rel: 0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          showinfo: 0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    controls: 1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    events: {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              'onStateChange': onPlayerStateChange
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    // Check player state and trigger token generation
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        function onPlayerStateChange(event) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              if (event.data === YT.PlayerState.PLAYING && !tokenDisplayed) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      const messageDisplay = document.getElementById('message-display');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              messageDisplay.style.display = 'block';

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      const intervalId = setInterval(() => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                const currentTime = player.getCurrentTime();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          const playbackRate = player.getPlaybackRate();

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    if (
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                currentTime - lastCheckedTime > 1.5 ||
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            playbackRate > 1
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  clearInterval(intervalId);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              return;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  if (
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              Math.floor(currentTime / 60) === randomMinute &&
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          !tokenDisplayed
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                const token = generateToken();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            document.getElementById('token').textContent = token;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        document.getElementById('token-display').style.display = 'block';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    document.getElementById('validity-text').style.display = 'block'; // Show the validity text
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                tokenDisplayed = true;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            messageDisplay.style.display = 'none';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        clearInterval(intervalId);

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    // Send token to backend
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                sendTokenToBackend(token);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    lastCheckedTime = currentTime;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }, 1000);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          // Refresh page function
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              function refreshPage() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    location.reload();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          </script>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          </body>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          </html>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          